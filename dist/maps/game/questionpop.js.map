{"version":3,"sources":["game/questionpop.coffee"],"names":[],"mappings":"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","file":"game/questionpop.js","sourceRoot":"/source/","sourcesContent":["# 提问泡泡\r\n\r\n# 用法\r\n# pop = new QuestionPop($panel, npc)\r\n# pop.show(script, callback)\r\n# 选择了任何选项后，将调用 callback 方法\r\n# pop.remove()\r\n\r\nwindow.QuestionPop = class QuestionPop\r\n  constructor: (@$panel)->\r\n\r\n  show: (script, callback)->\r\n    @$questionpop = buildel 'div.questionpop'\r\n      .css\r\n        'opacity': 0\r\n        'top': 30\r\n      .animate\r\n        'opacity': 1\r\n        'top': 0\r\n      , 500\r\n      .appendTo @$panel\r\n\r\n    @$box = buildel 'div.box'\r\n      .appendTo @$questionpop\r\n\r\n    @$label = buildel 'div.label'\r\n      .html '那么问题来了 …'\r\n      .appendTo @$box\r\n\r\n    @$text = buildel 'div.text'\r\n      .html script.text\r\n      .appendTo @$box\r\n\r\n    @$items = buildel 'div.items'\r\n      .appendTo @$box\r\n\r\n    for item, idx in script.items\r\n      $item = buildel 'div.item'\r\n        .appendTo @$items\r\n\r\n      $a = buildel 'a'\r\n        .data 'idx', idx\r\n        .attr\r\n          href: 'javascript:;'\r\n        .html item\r\n        .appendTo $item\r\n\r\n    # 自动滚屏\r\n    jQuery(document).trigger('chatflow.content-changed')\r\n\r\n    setTimeout =>\r\n      for item, idx in script.items\r\n        $a = @$items.find('a').eq(idx)\r\n        $a.one 'click', ->\r\n          result = jQuery(this).data('idx')\r\n          callback(result)\r\n    , 500\r\n\r\n  # show_selected: ->\r\n\r\n\r\n  remove: (callback)->\r\n    @$questionpop\r\n      .animate\r\n        'opacity': 0\r\n      , 200, =>\r\n        @$questionpop.remove()\r\n        callback() if callback"]}